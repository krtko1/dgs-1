\documentclass[12pt, twoside]{article}

\input{core/core.tex}
\input{core/format.tex}
\input{modules/(* module.id *)/styles/(* competition.id *)/format.tex}
\input{input/(* module.id *)/(* competition.id *)/(* volume.id *)/languages/(* language.id *)/format.tex}

\newcounter{volume}
\newcounter{problem}
 
\begin{document}
    \pagestyle{main}

    \section{(* i18n.section.problems *)}
    \pagestyle{problems}    
    (@ for problem in volume.problems @)%
        \setcounter{volume}{(* volume.number *)}%
        \setcounter{problem}{(* problem.number *)}%
        \RenewDocumentCommand{\problemDirectory}{}{\rootDirectory/(* module.id *)/(* competition.id *)/(* volume.id *)/languages/(* language.id *)/(* problem.id *)}%
        \subsection{(* problem.number *)}%
        \protectedInput{\problemDirectory/problem.tex}%
    (@ endfor @)

    \newpage    
    \section{(* i18n.section.solutions *)}
    \pagestyle{solutions}    
    (@ for problem in volume.problems @)%
        \setcounter{volume}{(* volume.number *)}%
        \setcounter{problem}{(* problem.number *)}%
        \RenewDocumentCommand{\problemDirectory}{}{\rootDirectory/(* module.id *)/(* competition.id *)/(* volume.id *)/languages/(* language.id *)/(* problem.id *)}%
        \subsection{(* problem.number *)}%
        \protectedInput{\problemDirectory/solution.tex}%
    (@ endfor @)

    \newpage
    \section{(* i18n.section.answers *)}
    \pagestyle{answers}
    (@ for problem in volume.problems @)%
        \setcounter{volume}{(* volume.number *)}%
        \setcounter{problem}{(* problem.number *)}%
        \RenewDocumentCommand{\problemDirectory}{}{\rootDirectory/(* module.id *)/(* competition.id *)/(* volume.id *)/languages/(* language.id *)/(* problem.id *)}%
        \subsection{(* problem.number *)}%
        \protectedInput{\problemDirectory/answer.tex}%
    (@ endfor @)
\end{document}
